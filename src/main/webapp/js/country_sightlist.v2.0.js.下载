/* 2019-11-27 08:08:05 cb.zhang */
var cQuery={};
$(function(){var a=$("<div></div>");$(document.body).append(a);var c=function(b,d){var e=this,a=$(b);this.$element=a;this.oldValue="";this.alignRight=d.alignRight||!1;this.title=d.title||"\u652f\u6301\u4e2d\u6587/\u62fc\u97f3/\u7b80\u62fc\u8f93";this.drawHtml=d.drawHtml;this.eventControl=d.eventControl||function(){};this.addBox();a.keyup(function(){$(this).val()!=e.oldValue&&e.blur()});a.click(function(b){e.focus();e.$element.select();b.stopPropagation()});$(document).click(function(){e.blur()});$(window).resize(function(){e.blur()})};
c.prototype={container:"",tabContainer:"",hasHtml:!1,selectHtml:'<div class="city_select_popup"><a class="close" href="javascript:;">\u00d7</a><p class="title"></p><ul class="tab_box"></ul></div>',addBox:function(){this.container=$(this.selectHtml);this.tabContainer=this.container.find(".tab_box");a.append(this.container);this.container.find(".title").text(this.title)},focus:function(){this.$element.focus();$(".city_select_popup").hide();$(".city_suggest_popup").hide();this.oldValue=this.$element.val();
this.hasHtml?(this.setOffset(),this.container.show()):this.displayPopup()},blur:function(){this.container.hide()},setOffset:function(){var b=this.$element.offset(),d=this.$element.outerHeight()-1,e=b.left;this.alignRight&&(e=e+this.$element.outerWidth()-this.container.outerWidth());this.container.css({top:b.top+d,left:e})},displayPopup:function(){var b=this;this.drawHtml(function(d){b.container.find(".city_item").remove();b.tabContainer.empty();b.container.append(d.html);b.tabContainer.append(d.tabHtml);
b.setOffset();b.addEventListener();b.eventControl(b);b.container.show();b.hasHtml=!0},b)},addEventListener:function(){var b=this,d=this.tabContainer,e=this.container.find(".city_item");this.container.click(function(b){b.stopPropagation()});this.container.find(".close").click(function(d){b.blur();d.stopPropagation()});d.find("li").on("click",function(b){var g=$(this).index();d.find("li").removeClass("current");$(this).addClass("current");e.removeClass("current");e.eq(g).addClass("current");b.stopPropagation()})}};
$.fn.citySelect=function(b){return this.each(function(){new c(this,b)})}});cQuery={};
$(function(){var a=$("<div></div>");$(document.body).append(a);var c=function(b,d){var e=this,a=$(b);this.$element=a;this.container="";this.firstData=null;this.placeholder=d.placeholder||"";this.formatData=d.formatData;this.eventControl=d.eventControl||function(){};this.cannotToCache=d.cannotToCache||!1;this.gos=0;this.oldValue=a.val();this.pageNum=0;this.totlePage=1;this.cache={};this.addBox();this.timer=null;a.keyup(function(b){e.onKeyup(b)});a.click(function(b){e.oldValue=e.$element.val();b.stopPropagation()});
$(document).click(function(){e.hidePopup()});$(window).resize(function(){e.hidePopup()})};c.prototype={kCode:{ENTER:13,UP:38,DOWN:40,ESC:27},perPageNum:10,suggestHtml:'<div class="city_suggest_popup"></div>',addBox:function(){var b=this;this.container=$(this.suggestHtml);a.append(this.container);this.container.click(function(d){b.$element.focus();d.stopPropagation()})},addToCache:function(b,d){!this.cannotToCache&&0<d.length&&(this.cache[b]=[],this.cache[b]=d)},checkCache:function(b){return this.cache[b]?
!0:!1},setOffset:function(){var b=this.$element.offset(),d=this.$element.outerHeight()-1;this.container.css({top:b.top+d,left:b.left})},checkValue:function(){""!=this.$element.val()&&this.$element.val()!=this.placeholder||this.hidePopup();if(this.$element.val()!=this.oldValue){var b=this,d=function(){b.showPopup();clearTimeout(b.timer);b.timer=null};b.timer||(b.timer=setTimeout(d,200))}this.oldValue=this.$element.val()},onKeyup:function(b){switch(b.keyCode){case this.kCode.UP:b=this.container.find(".city_suggest_item");
1<b.length?(this.gos--,-1==this.gos&&(this.gos=b.length-1),this.selected(b.eq(this.gos))):1==b.length&&this.selected(b.eq(0));break;case this.kCode.DOWN:b=this.container.find(".city_suggest_item");1<b.length?(this.gos++,1!=this.gos||b.hasClass("current")||(this.gos=0),this.gos==b.length&&(this.gos=0),this.selected(b.eq(this.gos))):1==b.length&&this.selected(b.eq(0));break;case this.kCode.ENTER:this.container.find(".city_suggest_item").eq(this.gos).trigger("click");break;case this.kCode.ESC:this.$element.val("");
this.hidePopup();break;default:this.checkValue()}},selected:function(b){this.container.find(".city_suggest_item").removeClass("current");b.addClass("current")},hidePopup:function(){clearTimeout(this.timer);this.timer=null;this.container.hide()},showPopup:function(b){var d=this;(b=this.$element.val())&&(this.checkCache(b)?this.displayPopup(this.cache[b]):d.formatData(b,function(e){d.addToCache(b,e);d.displayPopup(e)}))},displayPopup:function(b){this.pageNum=0;this.drawHtml(b);this.drawPageHtml();this.setOffset();
this.eventControl(this);this.container.show();this.pageControl(b)},drawHtml:function(b){this.container.find("div").not(".city_suggest_pager").remove();this.gos=0;var d="",e=b.length,a=Math.ceil(e/this.perPageNum),g=this.pageNum*this.perPageNum,c=(this.pageNum+1)*this.perPageNum,c=c>e?e:c;this.totlePage=a;if(0<e)for(this.firstData=b[0];g<c;g++)if(e=b[g],e.showRight)d+='<div class="city_suggest_item" data="'+e.data+'"><span class="fl">'+e.text+'</span><span class="fr">'+e.right+"</span></div>";else{if(d=
e.noAirPort?d+('<div class="city_suggest_noAir" data="'+e.data+'">'+e.text+'<span class="orange">&nbsp;-\u8be5\u57ce\u5e02\u6ca1\u6709\u673a\u573a</span></div>'):d+('<div class="city_suggest_item" data="'+e.data+'">'+e.text+"</div>"),e.airPort&&0<e.airPort.length)for(var a=0,n=e.airPort.length;a<n;a++)d+='<div class="city_suggest_item gray" data="'+e.data+'" data-airPort="'+e.airPort[a]+'">'+e.airPortText[a]+"</div>"}else this.firstData="",d+='<div class="city_suggest_null">\u5bf9\u4e0d\u8d77\uff0c\u6ca1\u6709\u627e\u5230\u5339\u914d\u7684\u5173\u952e\u5b57</div>';
this.container.prepend(d)},drawPageHtml:function(){this.container.find(".city_suggest_pager").remove();var b="",d=this.totlePage,e=0;if(1<d){for(;e<d;e++)b=0===e?b+'<a class="page_num active" href="javascript:;">1</a>':3>e?b+('<a class="page_num" href="javascript:;">'+(e+1)+"</a>"):b+('<a class="page_num" href="javascript:;" style="display: none;">'+(e+1)+"</a>");b='<div class="city_suggest_pager">'+('<a class="gray page_prev" href="javascript:;">&lt;</a>'+b+'<a class="page_next" href="javascript:;">&gt;</a>')+
"</div>"}this.container.append(b)},pageControl:function(b){var d=this,e=this.container.find(".city_suggest_pager");e.find("a").click(function(a){a=$(this);var g=e.find(".page_prev"),c=e.find(".page_next"),n=e.find(".page_num"),k=d.pageNum,q=d.totlePage;if(!a.hasClass("gray")&&!a.hasClass("active")){a.hasClass("page_prev")?(k-=1,c.removeClass("gray")):a.hasClass("page_next")?(k+=1,g.removeClass("gray")):k=parseInt(a.text(),10)-1;var h=k-1,l=k+1;0>=h&&(l=2);l>=q&&(h=q-3);n.each(function(b){b>=h&&b<=
l?$(this).show():$(this).hide()});0===k?(g.addClass("gray"),c.removeClass("gray")):k===q-1?(c.addClass("gray"),g.removeClass("gray")):(g.removeClass("gray"),c.removeClass("gray"));e.find("a.page_num").removeClass("active").eq(k).addClass("active");d.pageNum=k;d.drawHtml(b);d.eventControl(d)}})}};$.fn.citySuggest=function(b){return this.each(function(){new c(this,b)})}});var CitySuggestFilter=function(a){this._init(a)};
CitySuggestFilter.prototype={sort:"^0$ ^1$ ^3+$ ^0 ^1 ^3+ 0 1 3+".split(" "),_colsHash:null,_displayHash:{left:0,right:1,text:1},message:{sort:[]},_init:function(a){a=a||{};var c=$.type(a.sort);if(a.sort&&"array"==c||"function"==c)this.sort=a.sort,this._sortReString=null;this.sortFunction=a.sortFunction||this.sortFunction;a.message&&(this.message=$.extend(!0,{},this.message,a.message));this._colsHash=a._colsHash||this._colsHash;a._displayHash&&(this._displayHash=$.extend(!0,{},this._displayHash,a._displayHash))},
sortFunction:function(a,c){return a.left>c.left?1:a.left==c.left?0:-1},_initSort:function(){if(!this._sortReString){var a=this._sortReString={accurate:[],vague:[]},c=0,b=0;switch($.type(this.sort)){case "array":for(var d=0,e=this.sort.length;d<e;d++){var f=this.sort[d].match(/^(\^?)([^\^\$\|@\r\n\+]+)(\+?)(\$?)$/);if(f){if(/^\d$/.test(f[2]))f[2]=parseInt(f[2],10);else if(f[2]in this._colsHash)f[2]=this._colsHash[f[2]];else continue;var g=+f[2]||f[3]?"([^\\|@]*\\|){"+f[2]+(f[3]?",":"")+"}":"";a.accurate[c++]=
["@("+g,"","(\\|[^@]*)?)(?=@)"];a.vague[b++]=["@("+g+(f[1]?"":"[^\\|@]*"),"",(f[4]?"(\\|[^@]*)?":"[^@]*")+")(?=@)"]}}}}},getfilterData:function(a,c,b,d){this._initSort();var e=this,f=[],g=0,m=a;switch($.type(this.sort)){case "array":a=this._sortReString[b?"accurate":"vague"];b="array"==$.type(this.message.sort)?this.message.sort:[];for(var n=0,k=a.length;n<k;n++){a[n][1]=c;var q=RegExp(a[n].join(""),"gi"),h=[],l=0,m=m.replace(q,function(b,d){var a=d.split("|"),a={left:a[e._displayHash.left]||"",right:a[e._displayHash.right]||
"",text:a[e._displayHash.text]||"",data:d};h[l++]=a;return""});if(l){h.sort(this.sortFunction);if(d)return h[0].data;b[n]&&h.unshift($.tmpl.render(b[n],{val:c,items:h}));f[g++]=h}}if(d)return!1;break;case "function":h=this.sort(a,c,b,d);if(d)return h.length?h[0].data:!1;f[g++]=h;break;default:return!1}return f=Array.prototype.concat.apply([],f)}};
(function(a){a.pageEventBind=function(){function c(d,e,c){""==d||"0"==d||d>e||/\D/g.test(d)?(c.val(""),b(c)):a.pageLinkJump&&a.pageLinkJump(d,c)}function b(b){var e=b.clone(),a=b.offset(),c=0;b.css("visibility","hidden");e.css({position:"absolute",top:a.top+"px",left:a.left+"px",width:"18px",height:"16px",border:"1px solid #ccc"}).appendTo("body");var m=setInterval(function(){c++;e.css({top:a.top+2*Math.sin(c)+"px",left:a.left+1*Math.cos(c)+"px"});15==c&&(clearInterval(m),b.css("visibility","visible"),
e.remove())},30)}a(".pager_v1").each(function(){var b=parseInt(a(this).find(".numpage").text()),e=a(this).find("span input");e.on("keyup",function(f){var g=a(this).val();/\D/g.test(g)&&a(this).val("");13==f.keyCode&&c(g,b,e)}).parent("span").siblings(".gopage").on("click",function(){var a=e.val();c(a,b,e)})})};a.pageEventBind()})(jQuery);function ShowWantWentCommAjax(){ShowGowant()}
function ShowGowant(){var a=jQuery("#wantClickID").attr("data_type"),c=jQuery("#wantClickID").attr("dataresource-cat");$.ajax({url:"/Destinationsite/SharedComm/ShowGowant",type:"POST",async:!0,data:{Resource:c,pageType:a,rank:Math.random()},success:function(b){b.HasWented&&$("#wentClickID").addClass("current");b.HasWanted&&$("#wantClickID").addClass("current");b.WentTimes&&$("#emWentValueID").text(b.WentTimes.toString());b.WantTimes&&$("#emWantValueID").text(b.WantTimes.toString())},error:function(){}})}
function ClickWent(){var a=jQuery("#wentClickID").attr("data_type"),c=jQuery("#wentClickID").attr("dataresource-cat"),b=jQuery("#putDistrictId").val(),a={type:1,pageType:a,resource:c,district:b,rank:Math.random()};$.ajax({url:"/Destinationsite/SharedComm/ShowAddDistrictWent",type:"POST",async:!0,data:a,success:function(b){ShowGowant();$("#emWentValueID").html(Number($("#emWentValueID").html())+1)},error:function(){}})}
function ClickWant(){var a=jQuery("#wantClickID").attr("data_type"),c=jQuery("#wantClickID").attr("dataresource-cat"),b=jQuery("#putDistrictId").val(),a={type:2,pageType:a,resource:c,district:b,rank:Math.random()};$.ajax({url:"/Destinationsite/SharedComm/ShowAddDistrictWent",type:"POST",async:!0,data:a,success:function(b){ShowGowant();$("#emWantValueID").html(Number($("#emWantValueID").html())+1)},error:function(){}})}
function ShowGuideBook(){var a=$("#pdfDistrictId").val();$.ajax({url:"/Destinationsite/SharedComm/ShowGuideBook",type:"POST",async:!0,data:{districtId:a,topNum:"5",type:1,rank:Math.random()},success:function(a){if(0<a.length){var b=[],d=[],e=0;$.each(a,function(a,c){c&&(0==a?(b.push(' <li data-target="#myCarousel" data-slide-to="'+a+'" class="active"></li>'),d.push(' <div class="item active">')):(b.push(' <li data-target="#myCarousel" data-slide-to="'+a+'" ></li>'),d.push(' <div class="item">')),
e+=1,d.push('<h4 class="ellipsis"><a target="_blank" title="'+c.Name+'\u653b\u7565" href="'+c.pdfurl+'"> '+c.SubName+"\u653b\u7565</a></h4>"),d.push('<a href="'+c.pdfurl+'" target="_blank" class="guidepic"><img width=\'55\' height=\'83\' src="'+c.CoverPicUrl+'"></a>'),d.push('  <dl class="info">'),d.push("   <dd>\u66f4\u65b0\uff1a"+c.updateTime+"</dd>"),d.push("    <dd>\u4e0b\u8f7d\uff1a"+c.DownloadCount+"</dd>"),d.push('    <dd><a href="'+c.pdfurl+'" target="_blank" class="gsn-btn-20">\u514d\u8d39\u4e0b\u8f7d</a></dd></dl></div>'))});
""==b?$("#myCarousel").hide():($("#myCarousel").show(),$("#carousel-indicatorsID").html(b.join("")),$("#carousel-innerID").html(d.join("")),$("#myCarousel").carousel(),a=$("#carousel-indicatorsID").width()/2,$("#carousel-indicatorsID").css({"margin-left":-a}));1>=e&&$("#carousel-indicatorsID").hide();5>e&&$(".smore_btn").hide()}else $("#myCarousel").hide()},error:function(){$("#myCarousel").hide()}})}function ShowGuideWeather(){ShowGuideWeatherAjax($("#putDistrictId").val())}
function ShowGuideWeatherAjax(a){$.ajax({url:"/Destinationsite/SharedComm/GetGuideWeather",type:"POST",async:!0,dataType:"text",data:{districtId:a,rank:Math.random()},success:function(a){""!=a?($(".lastday").html(a),$("#weathertabId").show(),$("#gs_tianqiId").show()):($("#weathertabId").hide(),$("#gs_tianqiId").hide())},error:function(){}})}
function showSoaHotelLocationZone(a){a={City:a,rank:Math.random()};jQuery.ajax({url:"/Destinationsite/SharedComm/SoaHotelLocationZone",type:"POST",dataType:"text",data:a,error:function(a){},success:function(a){$(".keyword_search").html(a);$(".address_hot_abb2 li").click(function(){var b=$(this).index(".address_hot_abb2 > li");$(this).addClass("hot_selected2").siblings().removeClass("hot_selected2");$(".area_list").find("dd").hide().eq(b).show()});$("#hotel_position").click(function(){var b=$(".keyword_search");
$(this);b.show();$(document).click(function(d){d=d||window.event;"BODY"!=d.target.nodeName&&"FROM"!=d.target.nodeName||b.hide()})});$(".keyword_search dl.area_list").on("click","a",function(b){b=$(this).attr("data")||$(this).attr("metrodata");""!=b&&(b=b.split("|"),$("#hotel_position").val(b[1]),$("#txthideLocationZoneType").val(b[3]),$("#txthidenID").val(b[2]));$(".keyword_search").hide()})}})}
function ajaxSearchHotelList(){if(""==jQuery("#txtCheckIn").val())return alert("\u8bf7\u8f93\u5165\u5165\u4f4f\u65e5\u671f"),!1;if(""==jQuery("#txtCheckOut").val())return alert("\u8bf7\u8f93\u5165\u9000\u623f\u65e5\u671f"),!1;var a=new Date(Date.parse(jQuery("#txtCheckIn").val())),c=new Date(Date.parse(jQuery("#txtCheckOut").val()));if(a>=c)return alert("\u9000\u623f\u65e5\u671f\u5e94\u5927\u4e8e\u5165\u4f4f\u65e5\u671f"),!1;a=0;""==jQuery(".select-txt").html()&&(a=0);"\u4e0d\u9650"==jQuery(".select-txt").html()&&
(a=0);"\u4e94\u661f\u7ea7/\u8c6a\u534e"==jQuery(".select-txt").html()&&(a=5);"\u56db\u661f\u7ea7/\u9ad8\u6863"==jQuery(".select-txt").html()&&(a=4);"\u4e09\u661f\u7ea7/\u8212\u9002"==jQuery(".select-txt").html()&&(a=3);"\u4e8c\u661f\u7ea7\u53ca\u4ee5\u4e0b"==jQuery(".select-txt").html()&&(a=2);var b=jQuery("#txthidencityid").val(),c=jQuery("#txthideLocationZoneType").val(),d=jQuery("#txthidenID").val(),e=jQuery("#txtKeyword").val();jQuery("#txtCheckIn").val();jQuery("#txtCheckOut").val();var f=jQuery("#txthideninchina").val(),
g=jQuery("#txthidenename").val().toLowerCase(),g=g?g.replace(/.*[\u4e00-\u9fa5]+.*$/gm,"lists").replace(/\s/gm,"").replace(/[^a-z0-9]*/gmi,""):"ename";0<b?(b=f?"http://hotels.ctrip.com/hotel/"+g+""+b+"/":"http://hotels.ctrip.com/international/"+g+""+b+"/",""!=e?(0!=a&&(b+="star"+a),b+="/k1"+e):(""!=c&&(b+=c+d),0!=a&&(b+="star"+a)),document.forms[0].action=b,document.forms[0].target="_blank",document.forms[0].method="post",document.forms[0].submit()):window.open("http://hotels.ctrip.com/")}
function viewCtripHotelMap(a,c){0==a?window.open("http://hotels.ctrip.com/"):jQuery("#txthideninchina").val()?window.open("http://hotels.ctrip.com/hotel/"+c+""+a+"/map"):window.open("http://hotels.ctrip.com/international/maplist/"+c+""+a+"")}
function ShowNearHotel(){var a=$("#CityID").val(),c=$("#putDistrictId").val(),b=$("#Lat").val(),d=$("#Lon").val();$.ajax({url:"/Destinationsite/SharedComm/GetNearHotel",type:"POST",async:!0,dataType:"text",data:{City:a,District:c,Lat:b,Lon:d,rank:Math.random()},success:function(b){""==b?$("#dest_NearHotel").hide():$("#dest_NearHotel").html(b)},error:function(){$("#dest_NearHotel").hide()}})}
function ShowCityHotelList(){var a=$("#txthidencityid").val(),c=$("#txthidendistrictid").val(),b=$("#txthideninchina").val();$.ajax({url:"/Destinationsite/SharedComm/ShowCityHotelList",type:"POST",async:!0,dataType:"text",data:{City:a,District:c,InChina:b,rank:Math.random()},success:function(b){""==b?$("#cityHotelListID").hide():$("#cityHotelListID").html(b)},error:function(){$("#cityHotelListID").hide()}})}
function GetExpertPartialView(){var a=$("#txtDistrictId").val();$.ajax({url:"/Destinationsite/SharedComm/GetExpertPartialView",type:"POST",async:!0,dataType:"text",data:{district:a,rank:Math.random()},success:function(a){""==a?$("#destexpertId").hide():$("#destexpertId").html(a)},error:function(){$("#destexpertId").hide()}})}
function ShowAroundList(){var a=$("#putDistrictId").val();$("#JourUrl").val();$.ajax({url:"/Destinationsite/SharedComm/ShowAroundList",type:"POST",async:!0,dataType:"text",data:{district:a,rank:Math.random()},success:function(a){""!=a?($("#tourListId").html(a),$("#aroundSpanId").show()):$("#tourListId").html('<div class="gs_list_load"><i class="listface"></i>\u8fd9\u91cc\u6682\u65f6\u6ca1\u6709\u5468\u8fb9\u6e38\u4fe1\u606f\uff0c\u4f60\u53ef\u4ee5<a target="_blank" href="http://vacations.ctrip.com/domestic/">\u67e5\u770b\u66f4\u591a</a></p></div>')},
error:function(){$("#tourListId").html('<div class="gs_list_load"><i class="listface"></i>\u8fd9\u91cc\u6682\u65f6\u6ca1\u6709\u5468\u8fb9\u6e38\u4fe1\u606f\uff0c\u4f60\u53ef\u4ee5<a target="_blank" href="http://vacations.ctrip.com/domestic/">\u67e5\u770b\u66f4\u591a</a></p></div>')}})}
$(function(){$(".ttd_topnav").setfixed({top:"-5px",width:"100%"});0!==$(".city_sfind input[type='text']").length&&$(".city_sfind input[type='text']").placeholder();0!==$(".sightsearch input[type='text']").length&&$(".sightsearch input[type='text']").placeholder();$(".dest_toptitle .des_icon_want a").hover(function(){$(this).hasClass("current")||$(this).siblings("p").find(".textcolor").html("\u6211\u60f3\u53bb")},function(){$(this).hasClass("current")||$(this).siblings("p").find(".textcolor").html("\u60f3\u53bb")});
$(".dest_toptitle .des_icon_want a").click(function(){var a=$(this);a.hasClass("current")||a.hasClass("a_popup_login")||($(this).siblings("p").find(".textcolor").html("\u6211\u60f3\u53bb"),a=wantBeen(this),INTERFACE.wantRequestFn(a))});$(".dest_toptitle .des_icon_been a").hover(function(){$(this).hasClass("current")||$(this).siblings("p").find(".textcolor").html("\u6211\u53bb\u8fc7")},function(){$(this).hasClass("current")||$(this).siblings("p").find(".textcolor").html("\u53bb\u8fc7")});$(".dest_toptitle .des_icon_been a").click(function(){var a=
$(this);a.hasClass("current")||a.hasClass("a_popup_login")||($(this).siblings("p").find(".textcolor").html("\u6211\u53bb\u8fc7"),a=wantBeen(this),INTERFACE.beenRequestFn(a))});0!==$("#myCarousel").length&&$("#myCarousel").carousel();0!==$("#detailCarousel").length&&$("#detailCarousel").carousel();GS.ismoblie?$(".hoverweather span.arrow").remove():($("#WeaTher").mouseenter(function(){var a=$(this),b=a.offset().top-11,a=a.offset().left-47;$(".hoverweather").css({position:"absolute",top:b,left:a,display:"block",
"z-index":"22"})}),$(".hoverweather").mouseleave(function(){$(".hoverweather").hide()}));$(".ttd_topnav .gs_newicon").parent().css("z-index","1");$(".cityseojs .fr").toggle(function(){$(this).html("-\u6536\u8d77");$(this).parent().next().css("height","auto")},function(){$(this).html("+\u66f4\u591a");$(this).parent().next().css("height","44px")});var a=$(".ttd_guide_nav").height();$(".ttd_topnav ul li.ttd_guide_nav").hover(function(){$(this).addClass("ttd_nav_cur");$(this).find(".ttd_guide_link").addClass("ttd_guide_cur");
$(this).find(".corner_down_icon").addClass("corner_down_cur");$(this).find(".ttd_guide_uplayer").css("top",a).show()},function(){$(this).removeClass("ttd_nav_cur");$(this).find(".ttd_guide_link").removeClass("ttd_guide_cur");$(this).find(".corner_down_icon").removeClass("corner_down_cur");$(this).find(".ttd_guide_uplayer").hide()})});
function wantBeen(a){a=$(a);var c=a.siblings("p").find("em"),b=a.offset(),d=b.top,b=b.left+40,c=parseInt(c.text(),10),e=1,c=isNaN(c)?0:c,c=0>c?0:c;0===$("#gs_addone_1").length&&$("body").append($('<div id="gs_addone_1" class="gs_addone_1">+1</div>'));a.hasClass("current")?(c--,e=-1,a.removeClass("current"),$("#gs_addone_1").text("-1")):(c++,e=1,a.addClass("current"),$("#gs_addone_1").text("+1"));$("#gs_addone_1").css({opacity:1,top:d,left:b,display:"block","font-size":"18px"}).animate({top:d-30,opacity:0},
"slow",function(){$("#gs_addone_1").text("+1")});return e}function $tabs(a,c,b){$(a).click(function(){if($(this).parent().hasClass("scroll-top")){var d=$(".journalbtn_t").offset().top;$("body,html").animate({scrollTop:d},500)}$(this).addClass("current").siblings().removeClass("current");$(c).hide().eq($(a).index(this)).show();"function"==typeof b&&b($(this))});$(".journalslistv1 .journal-item").hover(function(){$(this).addClass("itemhover")},function(){$(this).removeClass("itemhover")})}
$(function(){$(".deschange .changelink").click(function(){var a=$(this),b=a.prev(),a=a.next(),d=b.val();b.val(a.val());a.val(d);return!1});$(".special_ticket li:last").css("border-bottom","none");$("#textAskSearch").placeholder();$("#btnAskSearch").click(function(){var a=$.trim($("#textAskSearch").val());""!=a&&"\u8f93\u5165\u60a8\u7684\u95ee\u9898"!=a&&window.open(INTERFACE.askSearchUrl+encodeURIComponent(a))});$(".check_kdgl .b_blue_s, .check_kdgl a.guidepic, .check_kdgl dt.ellipsis a").on("click",
function(a){a.preventDefault();$(".scan_kdglbox").show()});var a=function(){var a=document.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))};INTERFACE.gs_kdgl_url&&$("#glcode_share").qrcode({width:110,height:110,correctLevel:0,render:a()?"canvas":"table",text:INTERFACE.gs_kdgl_url})});
(function(a){function c(){var b=7,a=8;INTERFACE.isChina||(b=10,a=15);$("#hotelStartDate").val(getDateStr(b));$("#hotelEndDate").val(getDateStr(a));$("#hotelStartDate,#hotelEndDate").calendar({callback:function(b,a){var d=b.match(/-[\d]{1}\b/g),m=a.attr("id"),c=$("#hotelStartDate"),k=$("#hotelEndDate");if(null!=d)for(var q=0;q<d.length;q++){var h=d[q].replace("-","-0");b=b.replace(/-[\d]{1}\b/,h)}switch(m){case "hotelEndDate":k=c.val();checkDate(k,b)||(b=getDateStr(1,k));break;case "hotelStartDate":d=
k.val(),checkDate(b,d)||(k.val(getDateStr(1,b)),k.focus())}a.val(b)}});$("#hotelKeyword").placeholder();$("#cate_hotel .b_blue_s").click(function(){var b=$.trim($("#hotelTo").val());if(""==b)return $("#hotelTo").focus(),!1;"\u9152\u5e97\u540d/\u5730\u6807/\u5546\u5708"==$("#hotelKeyword").val()&&$("#hotelKeyword").val("");b={destination:GS.xssFilter(b),destinationData:$("#hotelTo").attr("data")||"",startDate:$("#hotelStartDate").val(),endDate:$("#hotelEndDate").val(),hotelLevel:$("#cate_hotel .select-txt").attr("data-value")||
0,keyword:GS.xssFilter($.trim($("#hotelKeyword").val()))};INTERFACE.searchHotelFn(b)})}a=this[a]=this&&this[a]||{};a.initHotel=function(){$(".tabitem .gsn-select").on("click",function(b){var a=$(this);"none"==a.children("ul").css("display")?(a.children("ul").show(),a.children("span").addClass("arrow-cur")):(a.children("ul").hide(),a.children("span").removeClass("arrow-cur"));b.stopPropagation()});$(document).on("click",function(){var b=$(".tabitem .gsn-select");b.children("ul").hide();b.children("span").removeClass("arrow-cur")});
$(".tabitem .gsn-select a").click(function(b){var a=$(this),c=a.attr("data-value");a.parents(".gsn-select").find(".select-txt").html(a.html()).addClass("select-txt-cur").attr("data-value",c);a.parents("ul").hide();a.parents(".gsn-select").children("span").removeClass("arrow-cur");b.stopPropagation()});var b=$("#hotelTo").val();c();$("#hotelTo").citySelect({drawHtml:function(b){$.getScript("http://hotels.ctrip.com/Domestic/Tool/AjaxGetCitySuggestion.aspx",function(){var a=cQuery.jsonpResponse.suggestion,
c=[],g=[],m;for(m in a){var n=[],k={},q=a[m],h=q.length,l=0,p=0;if("\u70ed\u95e8"!=m){for(g.push("<li><span>"+m+"</span></li>");l<h;l++){var r=q[l];(p=r.group||"")&&(k[p]=k[p]?k[p]+('<a href="javascript:void(0);" data="'+r.data+'">'+r.display+"</a>"):'<div class="city_item_in cf"><span class="city_item_letter">'+p+'</span><a href="javascript:void(0);" data="'+r.data+'">'+r.display+"</a>")}n.push('<div class="city_item">');for(var s in k)k[s]+="</div>",n.push(k[s]);n.push("</div>")}else{g.push('<li class="current"><span>'+
m+"</span></li>");for(n.push('<div class="city_item current"><div>');p<h;p++)r=q[p],n.push('<a href="javascript:void(0);" data="'+r.data+'">'+r.display+"</a>");n.push("</div></div>")}c.push(n.join(""))}b({html:c.join(""),tabHtml:g.join("")})})},eventControl:function(a){var e=a.$element;a.container.find(".city_item a").click(function(){var c=$.trim($(this).text());b!=c&&($("#hotelKeyword").val(""),e.val(c),e.attr("data",$(this).attr("data")),b=c);a.blur()})}});$("#hotelTo").citySuggest({formatData:function(b,
a){var c="http://hotels.ctrip.com/Domestic/Tool/AjaxIndexCityNew.aspx?keyword="+escape(b);$.getScript(c,function(){var b=cQuery.jsonpResponse;if(b&&b.data){for(var b=b.data.split("@"),d=b.length,c=0,k=[];c<d;c++)if(0!=c&&c!=d-1){var f=b[c],h=f.split("|"),l={};0<h.length&&(l.text=h[7]+""+h[5],l.data=f,l.keyword=h[4],k.push(l))}a(k)}})},eventControl:function(a){var e=a.container,c=a.$element;e.find(".city_suggest_item").click(function(){var e=$(this).attr("data"),c=e.split("|"),n=c[1],c=c[4];n==c&&
(c="");$("#hotelTo").val(n);$("#hotelTo").attr("data",e);b!=n&&($("#hotelKeyword").val(c),b=n);a.hidePopup();a.firstData=null});$(document).one("click",function(){var b=a.firstData;b?b.keyword&&e.find(".city_suggest_item").eq(0).trigger("click"):""===b&&(c.val(""),c.attr("data",""));a.firstData=null})}})};a.initForeignHotel=function(){var b=$("#hotelTo").val();c();$("#hotelTo").citySelect({drawHtml:function(b){$.getScript("http://hotels.ctrip.com/international/Tool/citySource_J.aspx?charset=gb2312",
function(){var a=cQuery.jsonpResponse.suggestion.cities,c=[],g=[],m;for(m in a){var n=[],k=a[m],q=k.length,h=0;"\u70ed\u95e8"!=m?(g.push("<li><span>"+m+"</span></li>"),n.push('<div class="city_item"><div></div>')):(g.push('<li class="current"><span>'+m+"</span></li>"),n.push('<div class="city_item current"><div>'));for(;h<q;h++){var l=k[h];n.push('<a href="javascript:void(0);" data="'+l.data+'">'+l.display+"</a>")}n.push("</div></div>");c.push(n.join(""))}b({html:c.join(""),tabHtml:g.join("")})})},
eventControl:function(a){var e=a.$element;a.container.find(".city_item a").click(function(){var c=$.trim($(this).text()),g=$(this).attr("data").split("|"),m=g[2];g[2]=g[3];g[3]=m;b!=c&&($("#hotelKeyword").val(""),e.val(c),e.attr("data",g.join("|")),b=c);a.blur()})}});$("#hotelTo").citySuggest({formatData:function(b,a){var c="http://hotels.ctrip.com/international/Tool/cityFilter.aspx?charset=gb2312&IsUseNewStyle=T&keyword="+escape(b);$.getScript(c,function(){var b=cQuery.jsonpResponse;if(b&&b.data){for(var b=
b.data.split("@"),d=b.length,c=0,k=[];c<d;c++)if(0!=c&&c!=d-1){var q=b[c],f=q.split("|"),l={};0<f.length&&(l.text=f[1],l.data=q,k.push(l))}a(k)}})},eventControl:function(a){var c=a.container,f=a.$element;c.find(".city_suggest_item").click(function(){var c=$(this).attr("data"),e=c.split("|")[1];$("#hotelTo").val(e);$("#hotelTo").attr("data",c);b!=e&&($("#hotelKeyword").val(""),b=e);a.hidePopup();a.firstData=null});$(document).one("click",function(){var b=a.firstData;b?c.find(".city_suggest_item").eq(0).trigger("click"):
""===b&&(f.val(""),f.attr("data",""));a.firstData=null})}})}})("SearchControl");
(function(a){function c(){$("#flightOneWay")[0].checked=!0;$("#flightBackForth")[0].checked=!1;$("input[name='flyType']").change(function(){0==$("input[name='flyType']:checked").val()?$("#cate_flight .sformline").eq(4).addClass("gray"):$("#cate_flight .sformline").eq(4).removeClass("gray")});$("#flightStartDate").val("yyyy-mm-dd");$("#flightEndDate").val("yyyy-mm-dd");$("#flightStartDate,#flightEndDate").calendar({callback:function(b,a){var c=b.match(/-[\d]{1}\b/g),f=a.attr("id"),g=$("#flightStartDate"),
m=$("#flightEndDate");if(null!=c)for(var n=0;n<c.length;n++){var k=c[n].replace("-","-0");b=b.replace(/-[\d]{1}\b/,k)}switch(f){case "flightStartDate":1==$("input[name='flyType']:checked").val()&&(c=m.val(),"yyyy-mm-dd"==c?(m.val(getDateStr(1,b)),m.focus()):checkDate(b,c)||(m.val(getDateStr(1,b)),m.focus()));break;case "flightEndDate":c=g.val(),"yyyy-mm-dd"==c||checkDate(c,b)||(b=getDateStr(1,c)),m.parents(".sformline").removeClass("gray"),$("input[name='flyType']").attr("checked","1")}a.val(b)}});
$("#cate_flight .changeinput a").click(function(){var b=$("#flightFrom"),a=$("#flightTo"),c=b.val();b.val(a.val());a.val(c);c=b.attr("data");b.attr("data",a.attr("data"));a.attr("data",c)});$("#cate_flight .radiobox").click(function(b){"flyType"!=b.target.name&&($(this).find("input[type='radio']").attr("checked",!0),0==$("input[name='flyType']:checked").val()?$("#cate_flight .sformline").eq(4).addClass("gray"):$("#cate_flight .sformline").eq(4).removeClass("gray"))});$("#cate_flight .b_blue_s").click(function(){if(""==
$.trim($("#flightFrom").val()))return $("#flightFrom").focus(),!1;if(""==$.trim($("#flightTo").val()))return $("#flightTo").focus(),!1;if("yyyy-mm-dd"==$.trim($("#flightStartDate").val()))return $("#flightStartDate").focus(),!1;var b={type:$("#cate_flight input[type='radio']:checked").val(),from:GS.xssFilter($.trim($("#flightFrom").val())),fromData:$("#flightFrom").attr("data")||"",destination:GS.xssFilter($.trim($("#flightTo").val())),destinationData:$("#flightTo").attr("data")||"",startDate:$("#flightStartDate").val(),
endDate:$("#flightEndDate").val()};INTERFACE.searchFlightFn(b)})}a=this[a]=this&&this[a]||{};a.initFlight=function(){function b(b){var a=[],c=[],d;for(d in b){var e=[];if("\u70ed\u95e8"!=d){c.push("<li><span>"+d+"</span></li>");e.push('<div class="city_item">');var f=b[d],l;for(l in f){var p=f[l],r=p.length,s=0;for(e.push('<div class="city_item_in cf"><span class="city_item_letter">'+l+"</span>");s<r;s++){var t=p[s];e.push('<a href="javascript:void(0);" data="'+t.data+'">'+t.display+"</a>")}e.push("</div>")}e.push("</div>")}else{p=
b[d];r=p.length;f=0;c.push('<li class="current"><span>'+d+"</span></li>");e.push('<div class="city_item current"><div>');for(f=0;f<r;f++)t=p[f],e.push('<a href="javascript:void(0);" data="'+t.data+'">'+t.display+"</a>");e.push("</div></div>")}a.push(e.join(""))}return{html:a.join(""),tabHtml:c.join("")}}var a=null,e=null;c();$("#flightFrom,#flightTo").citySelect({drawHtml:function(c){a?c(b(a)):$.ajax({dataType:"script",scriptCharset:"gb2312",url:"https://webresource.c-ctrip.com/code/cquery/resource/address/flight/flight_new_gb2312.js",
success:function(){a=cQuery.jsonpResponse.suggestion;e=cQuery.jsonpResponse.data;c(b(a))}})},eventControl:function(b){var a=b.$element;b.container.find(".city_item a").click(function(){a.val()!=$(this).text()&&(a.val($(this).text()),a.attr("data",$(this).attr("data")));"flightFrom"==a.attr("id")&&$("#flightTo").trigger("click");b.blur()})}});var f=new CitySuggestFilter({sort:function(b,a,c,d){var e=[],f=0,l=RegExp("@"+a+".+","i"),p=RegExp("@.+\\|([a-z]{3},)*"+a+".+","i"),r=/[a-z]/i;b.replace(RegExp("@([^@]*"+
a+"[^@]*)","gi"),function(b,c){var g=0,n=!1,u=c.split("|");d?u[1]==a&&(e[f++]={left:u[0],right:u[1],text:u[1],data:c,sortPrioity:g}):(""!=u[6]&&(g-=200),0<u[1].indexOf("(")&&(g-=1),-1<u[0].indexOf("Shanhaiguan")&&(g-=5),1==a.length?r.test(a)?(n=l.test(b),g+=100):(n=p.test(b),g+=50):1<a.length&&(l.test(b)&&(g+=100,n=!0),p.test(b)&&(0==u[4].indexOf(a.toUpperCase())&&(g+=50),0==u[2].indexOf(a.toUpperCase())&&(g+=10),n=!0)),n&&isNaN(a)&&(e[f++]={left:u[0],right:u[1],text:u[1],data:c,priority:g}))});d||
e.sort(function(b,a){return b.priority==a.priority?b.data<a.data?-1:b.data>a.data?1:0:b.priority>a.priority?-1:1});return e}});$("#flightFrom,#flightTo").citySuggest({formatData:function(b,a){var c=[];e&&(c=f.getfilterData(e,b,!1,!1));if(c&&0<c.length)for(var d=c.length,q=0;q<d;q++){var h=c[q];str=h.data;arr=str.split("|");airPort=arr[5];distance=arr[6];if("-"!=airPort){h.noAirPort=!0;airPort=airPort.split("#");distance=distance.split("#");h.airPort=[];h.airPortText=[];for(var l=0;l<airPort.length;l++){var p=
airPort[l].replace("-","");h.airPortText.push("-\u90bb\u8fd1\u673a\u573a\uff1a"+p+"-"+distance[l]+"");h.airPort.push(p)}}}a(c)},eventControl:function(b){var a=b.$element;b.container.find(".city_suggest_item").click(function(c){var d=$(this).attr("data").split("|"),e=d[1],d=d[2];$(this).attr("data-airPort")?(e=$(this).attr("data-airPort"),a.val(e),a.trigger("keyup")):(a.val(e),b.hidePopup(),a.attr("data","|"+e+"|"+d),"flightFrom"==a.attr("id")&&$("#flightTo").trigger("click"));b.firstData=null;c.stopPropagation()});
$(document).one("click",function(){var c=b.firstData;c?c.noAirPort&&0<c.airPort.length?(a.val(""),a.attr("data","")):(a.val(c.text),c=c.data.split("|"),a.attr("data","|"+c[1]+"|"+c[2])):""===c&&(a.val(""),a.attr("data",""));b.firstData=null})}})};a.initForeignFlight=function(){c();$("#flightFrom,#flightTo").citySelect({drawHtml:function(b,a){var c="",c="flightFrom"==a.$element.attr("id")?"https://webresource.c-ctrip.com/code/cquery/resource/address/flightintl/flightintl_start_new_gb2312.js":"https://webresource.c-ctrip.com/code/cquery/resource/address/flightintl/flightintl_dest_new_gb2312.js";
$.ajax({dataType:"script",scriptCharset:"gb2312",url:c,success:function(){var a=cQuery.jsonpResponse.suggestion,c=[],d=[],e=0,k;for(k in a){var q=[],h=a[k],l=h.length,p=0;0!==e?(d.push("<li><span>"+k+"</span></li>"),q.push('<div class="city_item"><div>')):(d.push('<li class="current"><span>'+k+"</span></li>"),q.push('<div class="city_item current"><div>'));for(p=0;p<l;p++){var r=h[p];q.push('<a href="javascript:void(0);" data="'+r.data+'">'+r.display+"</a>")}q.push("</div></div>");c.push(q.join(""));
e++}b({html:c.join(""),tabHtml:d.join("")})}})},eventControl:function(b){var a=b.$element;b.container.find(".city_item a").click(function(){if(a.val()!=$(this).text()){var c=escape($(this).text());$.ajax({dataType:"script",scriptCharset:"gb2312",url:"http://flights.ctrip.com/international/tools/GetCities.ashx?s="+c+"&a=0&t=0",success:function(){var b=cQuery.jsonpResponse,g=b.data;b.data&&1<b.data.split("|").length&&(c=g.split("|")[1],b=c.replace(/(.*?)\(([a-z]*?)\)/ig,"|$1|$2"),a.val(c),a.attr("data",
b))}})}"flightFrom"==a.attr("id")&&$("#flightTo").trigger("click");b.blur()})}});$("#flightFrom,#flightTo").citySuggest({formatData:function(b,a){var c="http://flights.ctrip.com/international/tools/GetCities.ashx?s="+escape(b)+"&a=0&t=0";$.getScript(c,function(){var b=cQuery.jsonpResponse;if(b&&b.data){for(var b=b.data.split("@"),c=b.length,e=0,n=[];e<c;e++)if(b[e]){var k=b[e],q=k.split("|"),h={};0<q.length&&(h.text=q[3],h.data=k,h.value=q[1],n.push(h))}a(n)}else a([])})},eventControl:function(b){var a=
b.$element;b.container.find(".city_suggest_item").click(function(c){var f=$(this).attr("data").split("|")[1];a.val(f);a.attr("data",f.replace(/(.*?)\(([a-z]*?)\)/ig,"|$1|$2"));b.hidePopup();"flightFrom"==a.attr("id")&&$("#flightTo").trigger("click");b.firstData=null;c.stopPropagation()});$(document).one("click",function(){var c=b.firstData;c?(a.val(c.value),a.attr("data",c.value.replace(/(.*?)\(([a-z]*?)\)/ig,"|$1|$2"))):""===c&&(a.val(""),a.attr("data",""));b.firstData=null})}})}})("SearchControl");
var Cmd={};
(function(a){function c(){$("#cate_travel .radiobox").click(function(){$(this).find("input[type='radio']").attr("checked",!0);$(this).parents(".checkul").find(".radiobox").not(this).find("input[type='radio']").attr("checked",!1)});$("#cate_travel .b_blue_s").click(function(){if(""==$.trim($("#travelTo").val()))return $("#travelTo").focus(),!1;var b={from:$.trim($("#travelFrom").val()),fromData:$("#travelFrom").attr("data")||"",destination:GS.xssFilter($.trim($("#travelTo").val())),destinationData:$("#travelTo").attr("data")||""};
INTERFACE.searchTravelFn(b)})}a=this[a]=this&&this[a]||{};a.initTravel=function(){c();var b=$("#travelFrom").attr("data")||2,a={},e={"\u70ed\u95e8\u57ce\u5e02":[{display:"\u5317\u4eac",data:"1"},{display:"\u4e0a\u6d77",data:"2"},{display:"\u5929\u6d25",data:"3"},{display:"\u91cd\u5e86",data:"4"},{display:"\u54c8\u5c14\u6ee8",data:"5"},{display:"\u5927\u8fde",data:"6"},{display:"\u9752\u5c9b",data:"7"},{display:"\u897f\u5b89",data:"10"},{display:"\u6566\u714c",data:"11"},{display:"\u5357\u4eac",data:"12"}],
ABCD:{B:[{display:"\u5317\u4eac",data:"1"},{display:"\u5305\u5934",data:"141"}],C:[{display:"\u91cd\u5e86",data:"4"},{display:"\u6210\u90fd",data:"28"},{display:"\u957f\u6625",data:"158"},{display:"\u957f\u6c99",data:"206"},{display:"\u5e38\u5dde",data:"213"}],D:[{display:"\u5927\u8fde",data:"6"},{display:"\u4e1c\u839e",data:"223"}]},EFGH:{F:[{display:"\u4f5b\u5c71",data:"251"},{display:"\u798f\u5dde",data:"258"}],G:[{display:"\u5e7f\u5dde",data:"32"},{display:"\u8d35\u9633",data:"38"}],H:[{display:"\u54c8\u5c14\u6ee8",
data:"5"},{display:"\u676d\u5dde",data:"17"},{display:"\u6d77\u53e3",data:"42"},{display:"\u547c\u548c\u6d69\u7279",data:"103"},{display:"\u6d77\u62c9\u5c14",data:"142"},{display:"\u5408\u80a5",data:"278"}]},JKLM:{J:[{display:"\u6d4e\u5357",data:"144"},{display:"\u6c5f\u95e8",data:"316"}],K:[{display:"\u6606\u660e",data:"34"},{display:"\u5580\u4ec0\u5e02",data:"109"}],L:[{display:"\u4e3d\u6c5f",data:"37"},{display:"\u62c9\u8428",data:"41"},{display:"\u5170\u5dde",data:"100"}],M:[{display:"\u7ef5\u9633",
data:"370"}]},NOPQRS:{N:[{display:"\u5357\u4eac",data:"12"},{display:"\u5357\u901a",data:"82"},{display:"\u5b81\u6ce2",data:"375"},{display:"\u5357\u660c",data:"376"},{display:"\u5357\u5b81",data:"380"}],Q:[{display:"\u9752\u5c9b",data:"7"},{display:"\u6cc9\u5dde",data:"406"}],S:[{display:"\u4e0a\u6d77",data:"2"},{display:"\u82cf\u5dde",data:"14"},{display:"\u6df1\u5733",data:"30"},{display:"\u4e09\u4e9a",data:"43"},{display:"\u77f3\u5bb6\u5e84",data:"428"},{display:"\u6c55\u5934",data:"447"},{display:"\u6c88\u9633",
data:"451"}]},TUVWX:{T:[{display:"\u5929\u6d25",data:"3"},{display:"\u592a\u539f",data:"105"},{display:"\u53f0\u5dde",data:"578"}],W:[{display:"\u65e0\u9521",data:"13"},{display:"\u4e4c\u9c81\u6728\u9f50",data:"39"},{display:"\u6b66\u6c49",data:"477"},{display:"\u5a01\u6d77",data:"47"},{display:"\u6e29\u5dde",data:"491"}],X:[{display:"\u897f\u5b89",data:"10"},{display:"\u53a6\u95e8",data:"25"},{display:"\u897f\u5b81",data:"124"},{display:"\u897f\u660c",data:"494"},{display:"\u5f90\u5dde",data:"512"}]},
YZ:{Y:[{display:"\u94f6\u5ddd",data:"99"},{display:"\u8fd0\u57ce",data:"140"},{display:"\u5ef6\u5409",data:"523"},{display:"\u6986\u6797",data:"527"},{display:"\u70df\u53f0",data:"533"},{display:"\u4e49\u4e4c",data:"536"}],Z:[{display:"\u73e0\u6d77",data:"31"},{display:"\u4e2d\u5c71",data:"553"},{display:"\u90d1\u5dde",data:"559"}]}};$("#travelFrom,#travelPlayFrom").citySelect({drawHtml:function(b){var a=[],c=[],d;for(d in e){var f=[];if("\u70ed\u95e8\u57ce\u5e02"!=d){c.push("<li><span>"+d+"</span></li>");
f.push('<div class="city_item">');var h=e[d],l;for(l in h){var p=h[l],r=p.length,s=0;for(f.push('<div class="city_item_in cf"><span class="city_item_letter">'+l+"</span>");s<r;s++){var t=p[s];f.push('<a href="javascript:void(0);" data="'+t.data+'">'+t.display+"</a>")}f.push("</div>")}f.push("</div>")}else{p=e[d];r=p.length;h=0;c.push('<li class="current"><span>'+d+"</span></li>");f.push('<div class="city_item current"><div>');for(h=0;h<r;h++)t=p[h],f.push('<a href="javascript:void(0);" data="'+t.data+
'">'+t.display+"</a>");f.push("</div></div>")}a.push(f.join(""))}b({html:a.join(""),tabHtml:c.join("")})},eventControl:function(a){var c=a.$element;a.container.find(".city_item a").click(function(){c.val()!=$(this).text()&&(c.val($(this).text()),c.attr("data",$(this).attr("data")));if("travelFrom"==c.attr("id"))b=$(this).attr("data")||2;else if("travelPlayFrom"==c.attr("id")){var d=$(this).attr("data")||2;INTERFACE.travelPlaySearch(d)}a.blur()})}});var f=new CitySuggestFilter;$("#travelTo").citySuggest({cannotToCache:!0,
formatData:function(c,e){a[b]&&(data=a[b],e(f.getfilterData(data,c,!1,!1)))},eventControl:function(b){var a=b.$element;b.container.find(".city_suggest_item").click(function(){var c=$(this).attr("data").split("|")[1];a.val(c);b.hidePopup()})}})}})("SearchControl");
(function(a){a=this[a]=this&&this[a]||{};a.initTicket=function(){$("#ticketText").placeholder();new CitySuggestFilter;$("#ticketText").citySuggest({formatData:function(a,b){$.ajax({type:"GET",url:"https://piao.ctrip.com/thingstodo-booking-bookingwebsite/api/AutoComplete?keyWords="+a+"&pageIndex=1&count=10",dataType:"jsonp",success:function(a){a=a.SearchList;for(var c=0,f=a.length,g=[];c<f;c++){var m=a[c];dataStr=m.ID+"|"+m.Name+"|"+m.ParentName+"|"+m.Type;g.push({data:dataStr,left:m.Name,right:m.ParentName,
text:m.Name,showRight:!0})}b(g,!0)}})},eventControl:function(a){var b=a.$element;a.container.find(".city_suggest_item").click(function(){var d=$(this).attr("data"),e=d.split("|")[1];b.val(e).attr("data",d);a.hidePopup()})}});$("#cate_ticket .b_blue_s").click(function(){var a=$("#ticketText");a.attr("data");a=$.trim(a.val());if(""==a||"\u8bf7\u8f93\u5165\u666f\u70b9\u540d\u79f0"==a)return $("#ticketText").focus(),!1;a="https://piao.ctrip.com/piao.html?keyword="+encodeURIComponent(a);window.open(a)})}})("SearchControl");
(function(a){function c(){var a=7;INTERFACE.isChina||(a=10);$("#trainStartDate").val(getDateStr(a));$("#trainStartDate").calendar({callback:function(a,b){var c=a.match(/-[\d]{1}\b/g);if(null!=c)for(var g=0;g<c.length;g++){var m=c[g].replace("-","-0");a=a.replace(/-[\d]{1}\b/,m)}b.val(a)}});$("#cate_train .radiobox").click(function(){$(this).find("input[type='radio']").attr("checked",!0);$(this).siblings(".radiobox").find("input[type='radio']").attr("checked",!1)});$("#cate_train .changeinput a").click(function(){var a=
$("#trainFrom"),b=$("#trainTo"),c=a.val();a.val(b.val());b.val(c);c=a.attr("data");a.attr("data",b.attr("data"));b.attr("data",c)});$("#cate_train .b_blue_s").click(function(){if(""==$.trim($("#trainFrom").val()))return $("#trainFrom").focus(),!1;if(""==$.trim($("#trainTo").val()))return $("#trainTo").focus(),!1;var a={from:GS.xssFilter($.trim($("#trainFrom").val())),fromData:$("#trainFrom").attr("data")||"",destination:GS.xssFilter($.trim($("#trainTo").val())),destinationData:$("#trainTo").attr("data")||
"",startDate:$("#trainStartDate").val()};INTERFACE.searchTrainFn(a)})}a=this[a]=this&&this[a]||{};a.initTrain=function(){function a(b){var c=[],d=[],e;for(e in b){var f=[],h={},l=b[e],p=l.length,r=0,s=0;if("\u70ed\u95e8"!=e){for(d.push("<li><span>"+e+"</span></li>");r<p;r++){var t=l[r];(s=t.data.split("|")[2].substring(0,1).toUpperCase())&&(h[s]=h[s]?h[s]+('<a href="javascript:void(0);" data="'+t.data+'">'+t.display+"</a>"):'<div class="city_item_in cf"><span class="city_item_letter">'+s+'</span><a href="javascript:void(0);" data="'+
t.data+'">'+t.display+"</a>")}f.push('<div class="city_item">');for(var v in h)h[v]+="</div>",f.push(h[v]);f.push("</div>")}else{d.push('<li class="current"><span>'+e+"</span></li>");for(f.push('<div class="city_item current"><div>');s<p;s++)t=l[s],f.push('<a href="javascript:void(0);" data="'+t.data+'">'+t.display+"</a>");f.push("</div></div>")}c.push(f.join(""))}return{html:c.join(""),tabHtml:d.join("")}}c();var d=null,e=null;$("#trainFrom,#trainTo").citySelect({drawHtml:function(c){d?c(a(d)):$.ajax({dataType:"script",
scriptCharset:"gb2312",url:"https://webresource.ctrip.com/code/cquery/resource/address/train_new/station_gb2312.js",success:function(){d=cQuery.jsonpResponse.suggestion;e=cQuery.jsonpResponse.data;c(a(d))}})},eventControl:function(a){var b=a.$element;a.container.find(".city_item a").click(function(){b.val()!=$(this).text()&&(b.val($(this).text()),b.attr("data",$(this).attr("data")));"trainFrom"==b.attr("id")&&$("#trainTo").trigger("click");a.blur()})}});var f=new CitySuggestFilter({sort:"^0$ ^1$ ^3+$ ^0 ^1 ^3+".split(" ")});
$("#trainFrom,#trainTo").citySuggest({formatData:function(a,b){b(f.getfilterData(e,a,!1,!1))},eventControl:function(a){var b=a.$element;a.container.find(".city_suggest_item").click(function(c){var d=$(this).attr("data").split("|"),e=d[1],d=$.trim(d[0]),d="|"+e+"|"+d;b.val(e);b.attr("data",d);a.hidePopup();"trainFrom"==b.attr("id")&&$("#trainTo").trigger("click");a.firstData=null;c.stopPropagation()});$(document).one("click",function(){var c=a.firstData;if(c){var d=c.data.split("|"),e=d[1],d=$.trim(d[0]),
e="|"+e+"|"+d;b.val(c.text);b.attr("data",e)}else""===c&&(b.val(""),b.attr("data",""));a.firstData=null})}})}})("SearchControl");
$(function(){var a=INTERFACE.isChina;$("#cateSTab li a").click(function(){var c=$(this);if(!c.parent().hasClass("active")){c.parent().siblings("li").removeClass("active");c.parent().addClass("active");var b=c.attr("href");$(b).siblings(".tabitem").removeClass("active");$(b).addClass("active");$(".city_select_popup").hide();$(".city_suggest_popup").hide();if(!c.data("withoutFn"))switch(b){case "#cate_flight":a?SearchControl.initFlight():SearchControl.initForeignFlight();c.data("withoutFn",!0);break;
case "#cate_ticket":SearchControl.initTicket();c.data("withoutFn",!0);break;case "#cate_train":SearchControl.initTrain(),c.data("withoutFn",!0)}}return!1});a?SearchControl.initHotel():SearchControl.initForeignHotel();SearchControl.initTravel()});
function submitForm(a){if(a.action){var c=document.createElement("FORM"),b=a.charset||"utf-8",d=a.method||"post",e=a.target||"",f=[],g=a.action;a=a.param||{};for(var m in a)f.push('<input type="hidden" name="'+m+'" value="'+a[m]+'" />');c.setAttribute("accept-charset",b);c.target=e;c.method=d;c.action=g;c.innerHTML=f.join("");document.body.appendChild(c);document.charset="gb2312";jQuery(window).on("beforeunload",function(){document.charset="UTF-8";jQuery(window).off("beforeunload")});c.submit()}}
function getDateStr(a,c){var b=new Date;if(c)var b=c.split("-"),d=parseInt(b[0],10),e=parseInt(b[1],10)-1,b=parseInt(b[2],10),b=new Date(d,e,b);b.setDate(b.getDate()+a);d=b.getFullYear();e=10>b.getMonth()+1?"0"+(b.getMonth()+1):b.getMonth()+1;b=10>b.getDate()?"0"+b.getDate():b.getDate();return d+"-"+e+"-"+b}
function checkDate(a,c){var b=a.split("-"),d=c.split("-"),e=parseInt(b[0],10),f=parseInt(d[0],10),g=parseInt(b[1],10),m=parseInt(d[1],10),b=parseInt(b[2],10),d=parseInt(d[2],10);return e<f||e==f&&g<m||e==f&&g==m&&b<d?!0:!1}function GetDateDiff(a){var c=new Date;a=new Date(Date.parse(a.replace(/-/g,"/")));return Math.ceil(parseFloat((a-c)/864E5,10))}$.pageLinkJump=function(a,c){var b=c.parents(".ttd_pager").attr("data-type");b?INTERFACE.pageLinkJump(b,a):INTERFACE.pageLinkJump(a)};
